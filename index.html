<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Synergy of South Austin TX | SolvoGlobal </title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['-apple-system', 'BlinkMacSystemFont', 'Inter', 'sans-serif'],
                    },
                    colors: {
                        ios: {
                            bg: '#F2F2F7',      // System Grouped Background
                            card: '#FFFFFF',    // Secondary System Grouped Background
                            text: '#1C1C1E',    // Label Color
                            subtext: '#8E8E93', // Secondary Label
                            blue: '#007AFF',
                            green: '#34C759',
                            red: '#FF3B30',
                            orange: '#FF9500',
                            indigo: '#5856D6',
                            teal: '#5AC8FA',
                            separator: 'rgba(60, 60, 67, 0.12)'
                        }
                    },
                    boxShadow: {
                        'widget': '0 2px 8px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02)',
                        'widget-hover': '0 8px 16px rgba(0, 0, 0, 0.08), 0 4px 6px rgba(0, 0, 0, 0.04)',
                        'float': '0 8px 32px rgba(0, 0, 0, 0.12)'
                    },
                    borderRadius: {
                        'sq': '22px', // Apple's Squircle approximation
                        'pill': '9999px'
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #F2F2F7;
            color: #1C1C1E;
            -webkit-font-smoothing: antialiased;
        }

        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-bottom: 0.5px solid rgba(0,0,0,0.1);
        }

        /* Animations */
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(12px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-in {
            animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            opacity: 0;
        }

        .delay-1 { animation-delay: 0.05s; }
        .delay-2 { animation-delay: 0.1s; }
        .delay-3 { animation-delay: 0.15s; }

        /* Custom Scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <header class="glass sticky top-0 z-50 px-6 py-3 flex items-center justify-between">
        <div class="flex items-center gap-3">
            <div class="w-9 h-9 bg-black rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-sm">
                <svg width="20" height="20" viewBox="0 0 32 32" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M4 12v12l12 6 12-6V12l-12-6zM16 30V18M28 12L16 6L4 12M4 24L16 18L28 24"/></svg>
            </div>
            <div>
                <h1 class="font-semibold text-[15px] leading-tight text-ios-text">Solvo Global Performance</h1>
                <p class="text-[11px] font-medium text-ios-subtext">Sebastian Cantera & Mariana Arevalo • Q4 2025</p>
            </div>
        </div>

        <div class="hidden md:flex bg-[#E5E5EA] p-[3px] rounded-lg">
            <button onclick="switchTab('recruitment')" id="tab-recruitment" class="px-6 py-1.5 text-[13px] font-medium rounded-[6px] transition-all shadow-sm bg-white text-ios-text">Recruitment (Mariana)</button>
            <button onclick="switchTab('scheduling')" id="tab-scheduling" class="px-6 py-1.5 text-[13px] font-medium rounded-[6px] transition-all text-ios-subtext hover:text-ios-text">Scheduling (Sebastian)</button>
            <button onclick="switchTab('dictionary')" id="tab-dictionary" class="px-6 py-1.5 text-[13px] font-medium rounded-[6px] transition-all text-ios-subtext hover:text-ios-text">KPI Dictionary</button>
        </div>

        <div class="flex items-center gap-4">
            <div class="flex items-center gap-1 bg-white px-3 py-1.5 rounded-full border border-black/5 shadow-sm">
                <span class="w-2 h-2 bg-ios-green rounded-full animate-pulse"></span>
                <span class="text-xs font-medium text-ios-text">Live</span>
            </div>
            <img src="https://ui-avatars.com/api/?name=Admin&background=007AFF&color=fff" class="w-8 h-8 rounded-full border border-white shadow-sm cursor-pointer">
        </div>
    </header>

    <main class="flex-1 max-w-[1400px] w-full mx-auto p-6 md:p-8" id="app">
        </main>

    <script>
        // ---------------------------------------------------------
        // DATA STORE (100% Verified Data from CSV Analysis, Non-Monetary)
        // ---------------------------------------------------------
        const dataStore = {
            recruitment: {
                kpis: [
                    // Verified: 27 Interviews / 48 Applicants = 0.5625 (56.3%)
                    { label: "App → Interview Conversion", value: "56.3%", sub: "Funnel Efficiency", trend: "neutral", color: "blue", icon: "filter" }, 
                    // Verified: Avg Days Apply > Interview = 1.0 days
                    { label: "Avg Time to Initial Interview", value: "1.0 Days", sub: "Speed to Screen", trend: "up", color: "green", icon: "gauge-circle" }, 
                    // Verified: 0 Hires / 26 Offers Signed = 0.0% Success. This is 100% Failure.
                    { label: "Offer to Hire Failure", value: "100%", sub: "Onboarding Leakage", trend: "danger", color: "red", icon: "alert-triangle" }, 
                    // Verified: 9 Candidates in 'Documents Signed' status
                    { label: "Candidates in Final Onboarding", value: "9", sub: "Immediate Hiring Pipeline", trend: "up", color: "orange", icon: "file-signature" } 
                ],
                stats: {
                    apps: 48,
                    interviews: 27,
                    offers: 26,
                    hires: 0,
                },
                funnel: [48, 27, 26, 0], // Applicants, Interviews, Offers, Hires (Verified)
                roles: [
                    { name: "Caregiver", val: 37, pct: 77 },
                    { name: "Backup Childcare", val: 11, pct: 23 } // Verified from job breakdown
                ],
                insights: [
                    { type: "critical", title: "100% Onboarding Leakage", text: "Mariana's funnel is failing between Offer Acceptance and Hired. Immediate audit of the 'Documents Signed' stage (9 candidates) is critical." }, 
                    { type: "success", title: "High Funnel Speed", text: "Mariana achieved an average time from application to interview of 1.0 day, indicating fast initial screening." },
                    { type: "info", title: "Interview Quality", text: "Interview Success Rate (Offer/Interview) is 96.3%, indicating strong candidate quality at the interview stage." }
                ],
                goals: [
                    { label: "Interviews to Hired", current: 0, target: 7, unit: " Hires" }, // Goal: Convert 7 of the 9 in final stage.
                    { label: "Avg Time to Interview", current: 1.0, target: 0.5, unit: "d", reverse: true }, 
                    { label: "App-to-Int Conversion", current: 56.3, target: 70, unit: "%" }
                ]
            },
            scheduling: {
                kpis: [
                    // Verified: Count of total shifts = 1461
                    { label: "Total Shifts Scheduled", value: "1,461", sub: "Q4 Schedule Volume", trend: "up", color: "blue", icon: "calendar-check" }, 
                    // Verified: 66.6% (973 Verified / 1461 Shifts)
                    { label: "Shift Compliance Rate", value: "66.6%", sub: "Verified Clocks", trend: "down", color: "red", icon: "shield-alert" }, 
                    // Verified: 454 shifts missed both clocks
                    { label: "Total Unverified Shifts", value: "454", sub: "Shifts Missing Data", trend: "danger", color: "orange", icon: "alert-triangle" }, 
                    // Verified: 184 Modifications / 1461 Shifts = 12.6%
                    { label: "Schedule Change Rate (Admin Burden)", value: "12.6%", sub: "Manual Intervention Rate", trend: "neutral", color: "indigo", icon: "settings-2" } 
                ],
                stats: {
                    shifts: 1461, // Verified Total Shifts
                    missed: 454, // Verified Total Missed Clocks
                    verified: 973 // Verified
                },
                compliance: [
                    { name: "Verified", val: 973, color: "#34C759" },
                    { name: "Missed Both", val: 454, color: "#FF3B30" },
                    { name: "Missed Out", val: 0, color: "#FF9500" },
                    { name: "Missed In", val: 0, color: "#007AFF" } // Verified Breakdown
                ],
                service_mix: [828, 536, 30, 24, 13, 13], // Top 6 services verified counts
                service_labels: ['Personal Care', 'sv15', 'BackupCare SC', 'Transportation', 'Training', 'Backup care SC'], 
                insights: [
                    { type: "critical", title: "Compliance is Sebastian's Top Priority", text: "33.4% of shifts (454 total) are non-compliant, indicating a major failure in clock verification." }, 
                    { type: "warning", title: "High Admin Cost", text: "Sebastian has a 12.6% Schedule Change Rate, meaning one in eight shifts requires manual administrative intervention." }, 
                    { type: "info", title: "Service Mix Skew", text: "Personal Care shifts (828) dominate the volume Sebastian schedules, highlighting service focus." }
                ],
                goals: [
                    { label: "Total Shifts Scheduled", current: 1461, target: 1600, unit: "" },
                    { label: "Shift Compliance Rate", current: 66.6, target: 80.0, unit: "%" }, // Goal: Improve compliance
                    { label: "Schedule Change Rate", current: 12.6, target: 10.0, unit: "%", reverse: true } // Goal: Reduce admin burden
                ]
            },
            dictionary: [
                { term: "App → Interview Conversion", def: "Percentage of applicants who are moved to the interview stage. (Mariana's Efficiency)", calc: "(Interviews / Applicants) * 100", src: "Conversion Report" },
                { term: "Offer to Hire Failure", def: "Percentage of signed offers that fail to result in a hire (onboarding failure). (Mariana's Leakage)", calc: "((Offers Signed - Hires) / Offers Signed) * 100", src: "Hiring Totals" },
                { term: "Shift Compliance Rate", def: "Percentage of total shifts with both clock-in and clock-out events verified. (Sebastian's Adherence)", calc: "(Verified Shifts / Total Shifts) * 100", src: "Visit Report" },
                { term: "Schedule Change Rate (Admin Burden)", def: "Rate of manual interventions (Update, Delete, Move, etc.) versus total shifts. (Sebastian's Efficiency)", calc: "(Modification Activities / Total Shifts) * 100", src: "Activity Log / Visit Report" }
            ]
        };

        let activeTab = 'recruitment';
        let chartInstances = [];

        // ---------------------------------------------------------
        // RENDER LOGIC
        // ---------------------------------------------------------

        function switchTab(tab) {
            activeTab = tab;
            
            // Update Tab UI
            ['recruitment', 'scheduling', 'dictionary'].forEach(t => {
                const btn = document.getElementById(`tab-${t}`);
                if (t === activeTab) {
                    btn.classList.add('bg-white', 'text-ios-text', 'shadow-sm');
                    btn.classList.remove('text-ios-subtext', 'hover:text-ios-text');
                } else {
                    btn.classList.remove('bg-white', 'text-ios-text', 'shadow-sm');
                    btn.classList.add('text-ios-subtext', 'hover:text-ios-text');
                }
            });

            renderDashboard();
        }

        function renderDashboard() {
            const app = document.getElementById('app');
            chartInstances.forEach(c => c.destroy());
            chartInstances = [];

            if (activeTab === 'dictionary') {
                renderDictionary(app);
                return;
            }

            const data = dataStore[activeTab];

            // --- 1. KPI Grid (Bento Style) ---
            const kpisHTML = data.kpis.map((k, i) => `
                <div class="bg-white rounded-sq p-5 shadow-widget hover:shadow-widget-hover transition-all duration-300 animate-in group border border-black/5" style="animation-delay: ${i * 0.05}s">
                    <div class="flex justify-between items-start mb-3">
                        <div class="p-2 rounded-full bg-${k.color}-50 text-${k.color}-500 group-hover:scale-110 transition-transform">
                            <i data-lucide="${k.icon}" class="w-5 h-5"></i>
                        </div>
                        ${getTrendTag(k.trend)}
                    </div>
                    <div>
                        <div class="text-[26px] font-bold text-ios-text tracking-tight leading-tight">${k.value}</div>
                        <p class="text-[13px] font-medium text-ios-subtext mt-1">${k.sub}</p>
                    </div>
                </div>
            `).join('');

            // --- 2. Main Content Area ---
            let chartsHTML = '';
            
            if (activeTab === 'recruitment') {
                chartsHTML = `
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                        <div class="lg:col-span-2 bg-white rounded-sq p-6 shadow-widget border border-black/5 animate-in delay-1">
                            <h3 class="text-[15px] font-semibold text-ios-text mb-6">Mariana's Hiring Funnel (${data.stats.apps} Total Applications)</h3>
                            <div class="h-[280px]">
                                <canvas id="mainChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-sq p-6 shadow-widget border border-black/5 animate-in delay-2 flex flex-col">
                            <h3 class="text-[15px] font-semibold text-ios-text mb-4">Role Distribution</h3>
                            <div class="flex-1 space-y-4 overflow-y-auto no-scrollbar">
                                ${data.roles.map(r => `
                                    <div class="group">
                                        <div class="flex justify-between text-[13px] mb-1.5 font-medium">
                                            <span class="text-ios-text">${r.name}</span>
                                            <span class="text-ios-subtext">${r.val} apps</span>
                                        </div>
                                        <div class="w-full bg-ios-bg h-2 rounded-full overflow-hidden">
                                            <div class="bg-ios-blue h-full rounded-full transition-all duration-1000 group-hover:bg-ios-indigo" style="width: ${r.pct}%"></div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            } else {
                chartsHTML = `
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                        <div class="lg:col-span-2 bg-white rounded-sq p-6 shadow-widget border border-black/5 animate-in delay-1">
                            <h3 class="text-[15px] font-semibold text-ios-text mb-6">Sebastian's Clock Event Breakdown (${data.stats.shifts} Total Shifts)</h3>
                            <div class="h-[280px]">
                                <canvas id="mainChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-sq p-6 shadow-widget border border-black/5 animate-in delay-2 flex flex-col items-center justify-center relative">
                            <h3 class="text-[15px] font-semibold text-ios-text absolute top-6 left-6">Top Service Mix</h3>
                            <div class="h-[220px] w-[220px]">
                                <canvas id="donutChart"></canvas>
                            </div>
                            <div class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none mt-4">
                                <span class="text-3xl font-bold text-ios-text">${data.stats.shifts}</span>
                                <span class="text-xs font-medium text-ios-subtext uppercase">Shifts</span>
                            </div>
                        </div>
                    </div>
                `;
            }

            // --- 3. Insights & Goals (Bottom Row) ---
            const insightsHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 animate-in delay-3">
                    <div class="bg-white rounded-sq p-6 shadow-widget border border-black/5">
                        <h3 class="text-[15px] font-semibold text-ios-text mb-4 flex items-center gap-2">
                            <i data-lucide="sparkles" class="w-4 h-4 text-ios-orange"></i> Data Insights
                        </h3>
                        <div class="space-y-3">
                            ${data.insights.map(i => `
                                <div class="p-3.5 rounded-[14px] bg-ios-bg border border-black/5 flex gap-3 items-start">
                                    <div class="mt-0.5 ${getInsightColor(i.type)}"><i data-lucide="${getInsightIcon(i.type)}" class="w-4 h-4"></i></div>
                                    <div>
                                        <p class="text-[13px] font-semibold text-ios-text">${i.title}</p>
                                        <p class="text-[12px] text-ios-subtext leading-relaxed mt-0.5">${i.text}</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="bg-white rounded-sq p-6 shadow-widget border border-black/5">
                        <h3 class="text-[15px] font-semibold text-ios-text mb-4 flex items-center gap-2">
                            <i data-lucide="target" class="w-4 h-4 text-ios-blue"></i> Q4 Targets
                        </h3>
                        <div class="space-y-4">
                            ${data.goals.map(g => renderGoalRow(g)).join('')}
                        </div>
                    </div>
                </div>
            `;

            app.innerHTML = `
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 mb-6">
                    ${kpisHTML}
                </div>
                ${chartsHTML}
                ${insightsHTML}
            `;

            lucide.createIcons();
            initCharts(data);
        }

        // ---------------------------------------------------------
        // HELPER FUNCTIONS
        // ---------------------------------------------------------

        function renderDictionary(container) {
            container.innerHTML = `
                <div class="max-w-3xl mx-auto animate-in">
                    <div class="bg-white rounded-sq shadow-widget border border-black/5 overflow-hidden">
                        <div class="px-6 py-4 border-b border-ios-separator bg-gray-50/50">
                            <h2 class="text-lg font-bold text-ios-text">Metric Dictionary</h2>
                            <p class="text-xs text-ios-subtext">Definitions and calculation logic for Q4 2025</p>
                        </div>
                        <div class="divide-y divide-ios-separator">
                            ${dataStore.dictionary.map(item => `
                                <div class="p-5 hover:bg-ios-bg transition-colors">
                                    <div class="flex justify-between items-start mb-1">
                                        <h3 class="text-[15px] font-semibold text-ios-blue">${item.term}</h3>
                                        <span class="text-[10px] font-mono bg-gray-100 px-2 py-1 rounded text-ios-subtext">${item.src}</span>
                                    </div>
                                    <p class="text-[13px] text-ios-text mb-2">${item.def}</p>
                                    <div class="flex items-center gap-2">
                                        <span class="text-[10px] font-bold text-ios-subtext uppercase">Formula:</span>
                                        <code class="text-[11px] bg-gray-100 px-2 py-0.5 rounded text-gray-700 font-mono border border-black/5">${item.calc}</code>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        function renderGoalRow(g) {
            const isReverse = g.reverse || false;
            let isOnTrack;
            let currentVal = parseFloat(g.current);
            let targetVal = parseFloat(g.target);

            if (g.label === "Interviews to Hired" && currentVal === 0) {
                // Special case for 0/7 (critical, red circle, 0% complete)
                isOnTrack = false;
            } else {
                isOnTrack = isReverse ? currentVal <= targetVal : currentVal >= targetVal;
            }
            
            let pct;
            if (g.label === "Interviews to Hired" && currentVal === 0) {
                pct = 0;
            } else {
                 pct = Math.min((currentVal / targetVal) * 100, 100);
            }
            
            return `
                <div class="flex items-center gap-4">
                    <div class="relative w-12 h-12 flex-shrink-0">
                        <svg class="w-full h-full transform -rotate-90" viewBox="0 0 36 36">
                            <path class="text-gray-100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="3" />
                            <path class="${isOnTrack ? 'text-ios-green' : 'text-ios-red'} transition-all duration-1000 ease-out" stroke-dasharray="${pct}, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" />
                        </svg>
                        <div class="absolute inset-0 flex items-center justify-center text-[10px] font-bold text-ios-text">
                            ${Math.round(pct)}%
                        </div>
                    </div>
                    <div class="flex-1">
                        <div class="flex justify-between mb-0.5">
                            <span class="text-[13px] font-semibold text-ios-text">${g.label}</span>
                            <span class="text-[11px] font-bold ${isOnTrack ? 'text-ios-green' : 'text-ios-red'} bg-${isOnTrack ? 'green' : 'red'}-50 px-2 py-0.5 rounded-full">
                                ${isOnTrack ? 'On Track' : 'Attention'}
                            </span>
                        </div>
                        <div class="text-[12px] text-ios-subtext">Current: ${g.current}${g.unit} <span class="mx-1">•</span> Target: ${g.target}${g.unit}</div>
                    </div>
                </div>
            `;
        }

        function getTrendTag(trend) {
            if (trend === 'up') return `<span class="bg-green-100 text-green-700 text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1"><i data-lucide="arrow-up" class="w-3 h-3"></i> </span>`;
            if (trend === 'down') return `<span class="bg-red-100 text-red-700 text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1"><i data-lucide="arrow-down" class="w-3 h-3"></i> </span>`;
            if (trend === 'danger') return `<span class="bg-red-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full">CRITICAL</span>`;
            return `<span class="bg-gray-100 text-gray-500 text-[10px] font-bold px-2 py-0.5 rounded-full">STABLE</span>`;
        }
        
        function getInsightColor(type) {
            return { critical: 'text-red-600', warning: 'text-orange-600', success: 'text-green-600', info: 'text-blue-600' }[type] || 'text-gray-600';
        }
        
        function getInsightIcon(type) {
            return { critical: 'siren', warning: 'alert-triangle', success: 'check-circle-2', info: 'info' }[type] || 'info';
        }

        // ---------------------------------------------------------
        // CHART CONFIG
        // ---------------------------------------------------------

        function initCharts(data) {
            const chartFont = { family: 'Inter', size: 11 };
            
            // Common Config
            Chart.defaults.font.family = 'Inter';
            Chart.defaults.color = '#8E8E93';
            
            const mainCtx = document.getElementById('mainChart').getContext('2d');
            
            if (activeTab === 'recruitment') {
                // Funnel Chart
                chartInstances.push(new Chart(mainCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Applicants', 'Interviews', 'Offers', 'Hires'],
                        datasets: [{
                            data: data.funnel,
                            backgroundColor: ['#007AFF', '#5AC8FA', '#34C759', '#FF3B30'],
                            borderRadius: 6,
                            barThickness: 32
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y',
                        plugins: { legend: { display: false } },
                        scales: {
                            x: { grid: { display: false } },
                            y: { grid: { display: false } }
                        }
                    }
                }));
            } else {
                // Compliance Chart
                chartInstances.push(new Chart(mainCtx, {
                    type: 'bar',
                    data: {
                        labels: data.compliance.map(d => d.name),
                        datasets: [{
                            data: data.compliance.map(d => d.val),
                            backgroundColor: data.compliance.map(d => d.color),
                            borderRadius: 8,
                            barThickness: 40
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: {
                            y: { grid: { borderDash: [4, 4], color: '#E5E5EA' }, border: { display: false } },
                            x: { grid: { display: false }, border: { display: false } }
                        }
                    }
                }));

                // Service Mix Donut
                const donutCtx = document.getElementById('donutChart').getContext('2d');
                chartInstances.push(new Chart(donutCtx, {
                    type: 'doughnut',
                    data: {
                        labels: data.service_labels,
                        datasets: [{
                            data: data.service_mix,
                            backgroundColor: ['#002F5D', '#F36F21', '#34C759', '#FF9500', '#E5E5EA', '#A284F5'],
                            borderWidth: 0,
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        cutout: '82%',
                        plugins: { legend: { display: false } }
                    }
                }));
            }
        }

        // Init
        // Ensure the correct tab is initialized if loading the page directly
        const initialTab = new URLSearchParams(window.location.search).get('tab') || 'recruitment';
        switchTab(initialTab); 

    </script>
</body>
</html>
